CXX = g++

ROOT_DIR =`root-config --prefix` 

# Delphes directory
DELPHES_DIR = ${DELPHES_HOME}

#Rivet
RIVET_DIR = `rivet-config --libdir`
RIVET_LIBS = `rivet-config --libs`
RIVET_LDFALGS=`rivet-config --ldflags`
RIVET_CXXFLAGS=`rivet-config --cppflags`

#ONNX
#ONNX_DIR=-I/Users/gaetano/programs/onnxruntime/include/
ONNX_DIR=-I/opt/homebrew/include/onnxruntime/
ONNX_LIBS=-L/opt/homebrew/lib/ -lonnxruntime
#ONNX_LIBS=-L/Users/gaetano/programs/onnxruntime/build/MacOS/RelWithDebInfo/lib -lonnxruntime 
#ONNX_INC=

CXXFLAGS = -g -fsanitize=address `root-config --cflags`
CXXFLAGS += -I$(DELPHES_DIR) -I$(DELPHES_DIR)/external
CXXFLAGS += $(RIVET_CXXFLAGS)
CXXFLAGS +=$(ONNX_DIR)

#LDFLAGS  = -ld_classic  -L$(shell $(ROOT_DIR)/bin/root-config --libs) -lRooFit -lRooStats  -lRooFitCore
ROOTLIBS = `root-config --libs` -lRooFit -lRooStats  -lRooFitCore

LDFLAGS = -L$(DELPHES_DIR) -lDelphes -rpath $(DELPHES_DIR)
LDFLAGS  += $(ROOTLIBS)
LDFLAGS  += $(RIVET_LDFALGS)
LDFLAGS +=$(ONNX_LIBS)


all: zAnalyzer

clean:
	rm -f zAnalyzer

%: %.cpp
	$(CXX) $(CXXFLAGS)  -o $@ $^ $(LDFLAGS)